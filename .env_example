# -----------------------------
# Confluence connection settings
# -----------------------------

# Base URL of Confluence, e.g. https://confluence.example.com
CONFLUENCE_BASE_URL=https://edu.emias.ru

# Use anonymous access (true/false). If true, no auth headers are sent.
CONFLUENCE_USE_ANONYMOUS=true

# Username for Basic Auth (used when CONFLUENCE_USE_ANONYMOUS=false)
CONFLUENCE_USERNAME=

# API token / password for Basic Auth (used when CONFLUENCE_USE_ANONYMOUS=false)
CONFLUENCE_API_TOKEN=

# REST API prefix (advanced). Usually keep default.
CONFLUENCE_REST_API_PREFIX=/rest/api

# Comma-separated page IDs to fetch. If empty, the script crawls the portal (all pages).
CONFLUENCE_PAGE_ID=223798150

# Page listing page-size (limit) for /content listing
CONFLUENCE_PAGE_LIST_LIMIT=100

# Max number of concurrent HTTP requests to Confluence
CONFLUENCE_CONCURRENCY=10

# HTTP timeout in seconds
CONFLUENCE_TIMEOUT_SECONDS=30

# -----------------------------
# Chunking / parsing settings
# -----------------------------

# Target chunk size in "tokens" (concept uses fast estimator by default)
CHUNK_SIZE_TOKENS=512

# Minimal chunk size: if current chunk is too small, it tries to split next block to fill remaining budget.
CHUNK_MIN_TOKENS=120

# Max heading levels to include in [SECTION] (counted from closest/least important)
HEADING_LEVELS_FOR_TEXT=2

# Add [PAGE] prefix to text_for_embedding (true/false)
ADD_PAGE_PREFIX=true

# Add [SECTION] prefix to text_for_embedding (true/false)
ADD_SECTION_PREFIX=true

# Tags to ignore completely (comma-separated). Removed from HTML before parsing blocks.
IGNORE_TAGS=code,script,style,hr

# -----------------------------
# Output settings
# -----------------------------

# Directory for output JSON files
OUTPUT_DIR=./out

# Output filename prefix (timestamp will be appended)
OUTPUT_PREFIX=confluence_structured

# -----------------------------
# Token counting (optional)
# -----------------------------

# Token counter strategy: "simple" (default) or "hf" (requires transformers installed + local tokenizer)
TOKEN_COUNT_STRATEGY=hf

# Path to local HuggingFace tokenizer (directory). Used only when TOKEN_COUNT_STRATEGY=hf.
TOKENIZER_LOCAL_PATH=./models/USER-bge-m3

BLOCK_TAGS=p,div,blockquote,pre,ul,ol,table,h1,h2,h3,h4,h5,h6,section,article,figure,figcaption

ENABLE_PROGRESS_BAR=true

CHUNK_OVERLAP_TOKENS=120